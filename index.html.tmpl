#errorCatcher Echo
##    $Revision: 1 $
##    $Author: weewx@davies-barnard.co.uk $
##    $Date: 2013-12-30 $
##
## Specifying an encoding of UTF-8 is usually safe, but if your text is 
## actually in Latin-1, then you should replace the string "UTF-8" with "latin-1"
#encoding UTF-8
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

  <head profile="http://www.w3.org/2005/10/profile">
    #if $encoding == 'utf8'
      <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    #end if    
    
  <title>$station.location Current Weather Conditions</title>
    <link rel="stylesheet" type="text/css" href="weewx.css"/>
    <link rel="stylesheet" type="text/css" href="grid.css"/>
    <link rel="icon" type="image/png" href="favicon.ico" />
    
  <script type="text/javascript">
      function openURL(urlname)
      {
        window.location=urlname;
      }
      function openNoaaFile(date)
      {
        var url = "NOAA/NOAA-";
        url = url + date;
        url = url + ".txt";
        window.location=url;
      }
    </script>
  
  </head>

  <body>
    <div id="page" class="container_12">
      <header>
        <div id="masthead" class="grid_5">
            <h1>$station.location</h1>
            <h2>Current   Weather    Conditions</h2>
            <h3>$current.dateTime</h3>
        </div>
        
        <div class="grid_3"><!-- INSERT YOUR WUNDERGROUND CODE HERE -->
          <a href="http://www.wunderground.com/weatherstation/WXDailyHistory.asp?ID=IBRISTOL31"><img src="http://banners.wunderground.com/cgi-bin/banner/ban/wxBanner?bannertype=WeatherStationCount&weatherstationcount=IBRISTOL31" height="160" width="163" border="0" alt="Weather Underground PWS IBRISTOL31" /></a>
        <!-- END OF WUNDERGROUND CODE --></div>
      
        <div id="stats" class="grid_4">
          <h3>Stats</h3>
          Weewx uptime: $station.uptime<br/>
          Server  uptime: $station.os_uptime<br/>
          weewx v$station.version
          <h3>Location</h3>
          Latitude: $station.latitude[0]&deg; $station.latitude[1]' $station.latitude[2]<br />
          Longitude: $station.longitude[0]&deg; $station.longitude[1]' $station.longitude[2]<br />
          Altitude: $station.altitude<br />
        </div>
      </header>
      <!-- End of Header Section -->
      
      <!--Start of navigation -->
      <nav id="access" role="navigation">
        <h1 class="assistive-text section-heading">Main menu</h1>
        <div class="skip-link screen-reader-text">
          <a href="#content" title="Skip to content">Skip to content</a>
        </div>
        <div class="menu-top-menu-container">
          <ul id="menu-top-menu" class="menu">
            <li id="menu-item-1" class="menu-item menu-item-home current-menu-item">
              <a href="index.html">Home</a>
            </li>
            <li id="menu-item-2" class="menu-item"><a href="week.html">Week</a></li>
            <li id="menu-item-3" class="menu-item"><a href="month.html">Month</a></li>
            <li id="menu-item-4" class="menu-item"><a href="year.html">Year</a></li>
            <li id="menu-item-5" class="menu-item"><a href="#">Monthly</a>
              <ul class="sub-menu">
                #for $monthYear  in $SummaryByMonth
                  <li><a href="#" id="$monthYear" onClick="openNoaaFile('$monthYear')">
			$monthYear
			</a></li>
                #end for
              </ul>
            </li>
            <li id="menu-item-6" class="menu-item"><a href="#">Yearly</a>
              <ul class="sub-menu">
                #for   $yr   in   $SummaryByYear 
                  <li><a href="#" id="$yr" onClick="openNoaaFile('$yr')">$yr</a></li>  
                #end for
              </ul>
            </li>
            <li id="menu-item-7" class="menu-item"><a href="RSS/weewx_rss.xml">RSS</a></li>
            <li id="menu-item-8" class="menu-item"><a href="mobile.html">WAP</a></li>
            <li id="menu-item-9" class="menu-item"><a href="smartphone/index.html">Mobile</a></li>
          </ul>
        </div>
      </nav>
      <!-- End of Navigation -->
      
      <!-- Left Hand Side Stats Group -->
      <div id="stats_group" class="grid_4">
          <div class="stats">
              <h3 class="stats_header">
                  Current Conditions
              </h3>
          <table>
            <tbody>
              <tr>
                <td class="stats_label">Outside Temperature</td>
                <td class="stats_data">$current.outTemp</td>
              </tr>
              <tr>
                <td class="stats_label">Wind Chill</td>
                <td class="stats_data">$current.windchill</td>
              </tr>
              <tr>
                <td class="stats_label">Heat Index</td>
                <td class="stats_data">$current.heatindex</td>
              </tr>
              <tr>
                <td class="stats_label">Dewpoint</td>
                <td class="stats_data">$current.dewpoint</td>
              </tr>
              <tr>
                <td class="stats_label">Humidity</td>
                <td class="stats_data">$current.outHumidity</td>
              </tr>
              <tr>
                <td class="stats_label">Barometer</td>
                <td class="stats_data">$current.barometer</td>
              </tr>
              <tr>
                <td class="stats_label">Barometer trend ($trend.time_delta.hour.format("%.0f"))</td>
                <td class="stats_data">$trend.barometer</td>
              </tr>
              <tr>
                <td class="stats_label">Wind</td>
                <td class="stats_data">
                  $current.windSpeed from $current.windDir ($current.windDir.ordinal_compass)
                </td>
              </tr>
              <tr>
                <td class="stats_label">Rain Rate</td>
                <td class="stats_data">$current.rainRate</td>
              </tr>
              <tr>
                <td class="stats_label">Inside Temperature</td>
                <td class="stats_data">$current.inTemp</td>
              </tr>
              #if $day.extraTemp1.has_data
                <tr>
                  <td class="stats_label">Pond Temperature</td>
                  <td class="stats_data">$current.extraTemp1</td>
                </tr>
              #end if
              #if $day.UV.has_data
                <tr>
                  <td class="stats_label">UV</td>
                  <td class="stats_data">$current.UV</td>
                </tr>
              #end if
              #if $day.ET.has_data and $day.ET.sum.raw > 0.0
                <tr>
                  <td class="stats_label">ET</td>
                  <td class="stats_data">$current.ET</td>
                </tr>
              #end if
              #if $day.radiation.has_data
                <tr>
                  <td class="stats_label">Solar Radiation</td>
                  <td class="stats_data">$current.radiation</td>
                </tr>
              #end if
            </tbody>
          </table>
        </div>
        <div class="stats">
          <h3 class="stats_header">
            Since Midnight
          </h3>
          <table>
            <tbody>
              <tr>
                <td class="stats_label">
                  High Temperature<br/>
                  Low Temperature
                </td>
                <td class="stats_data">
                  $day.outTemp.max at $day.outTemp.maxtime<br/>
                  $day.outTemp.min at $day.outTemp.mintime
                </td>
              </tr>
              <tr>
                <td class="stats_label">
                  High Heat Index<br/>
                  Low Wind Chill
                </td>
                <td class="stats_data">
                  $day.heatindex.max at $day.heatindex.maxtime<br/>
                  $day.windchill.min at $day.windchill.mintime
                </td>
              </tr>
              <tr>
                <td class="stats_label">
                  High Humidity<br/>
                  Low Humidity
                </td>
                <td class="stats_data">
                  $day.outHumidity.max at $day.outHumidity.maxtime<br/>
                  $day.outHumidity.min at $day.outHumidity.mintime
                </td>
              </tr>
              <tr>
                <td class="stats_label">
                  High Dewpoint<br/>
                  Low Dewpoint
                </td>
                <td class="stats_data">
                  $day.dewpoint.max at $day.dewpoint.maxtime<br/>
                  $day.dewpoint.min at $day.dewpoint.mintime
                </td>
              </tr>
              <tr>
                <td class="stats_label">
                  High Barometer<br/>
                  Low Barometer
                </td>
                <td class="stats_data">
                  $day.barometer.max at $day.barometer.maxtime<br/>
                  $day.barometer.min at $day.barometer.mintime
                </td>
              </tr>
              <tr>
                <td class="stats_label">Today's Rain</td>
                <td class="stats_data">$day.rain.sum</td>
              </tr>
              <tr>
                <td class="stats_label">High Rain Rate</td>
                <td class="stats_data">$day.rainRate.max at $day.rainRate.maxtime</td>
              </tr>
              <tr>
                <td class="stats_label">
                  High Wind
                </td>
                <td class="stats_data">
                  $day.wind.max from $day.wind.gustdir at $day.wind.maxtime
                </td>
              </tr>
              <tr>
                <td class="stats_label">
                  Average Wind
                </td>
                <td class="stats_data">
                  $day.wind.avg
                </td>
              </tr>
              <tr>
                <td class="stats_label">
                  RMS Wind
                </td>
                <td class="stats_data">
                  $day.wind.rms
                </td>
              </tr>

              <tr>
                <td class="stats_label">
                  Vector Average Speed<br/>
                  Vector Average Direction
                </td>
                <td class="stats_data">
                  $day.wind.vecavg<br/>
                  $day.wind.vecdir
                </td>
              </tr>

              <tr>
                <td class="stats_label">
                  High Inside Temperature<br/>
                  Low Inside Temperature
                </td>
                <td class="stats_data">
                  $day.inTemp.max at $day.inTemp.maxtime<br/>
                  $day.inTemp.min at $day.inTemp.mintime
                </td>
              </tr>
              #if $day.extraTemp1.has_data
                <tr>
                  <td class="stats_label">
                    High Pond Temperature<br/>
                    Low Pond Temperature
                  </td>
                  <td class="stats_data">
                    $day.extraTemp1.max at $day.extraTemp1.maxtime<br/>
                    $day.extraTemp1.min at $day.extraTemp1.mintime
                  </td>
                </tr>
              #end if
              #if $day.UV.has_data
                <tr>
                  <td class="stats_label">
                    High UV<br/>
                    Low UV
                  </td>
                  <td class="stats_data">
                    $day.UV.max at $day.UV.maxtime<br/>
                    $day.UV.min at $day.UV.mintime
                  </td>
                </tr>
              #end if
              #if $day.ET.has_data and $day.ET.sum.raw >0.0
                <tr>
                  <td class="stats_label">
                    High ET<br/>
                    Low ET
                  </td>
                  <td class="stats_data">
                    $day.ET.max at $day.ET.maxtime<br/>
                    $day.ET.min at $day.ET.mintime
                  </td>
                </tr>
              #end if
              #if $day.radiation.has_data
                <tr>
                  <td class="stats_label">
                    High Radiation<br/>
                    Low Radiation
                  </td>
                  <td class="stats_data">
                    $day.radiation.max at $day.radiation.maxtime<br/>
                    $day.radiation.min at $day.radiation.mintime
                  </td>
                </tr>
              #end if
            </tbody>
          </table>
        </div> <!--End class "stats" -->
        
        #if $Extras.has_key('radar_img')
          <div id="radar_img">
                <a  href="$Extras.radar_url"><img src="$Extras.radar_img" alt="Radar" /></a>
            <p>Click image for expanded radar loop</p>
          </div>
        #end if

      </div> <!--End  Left Hand Stats Group and class "stats_group" -->

      <div id="content" class="grid_8">
        
        <div class="plots">
          <img class="grid_4 alpha" src="daytempdew.png"   alt="temperatures" />
          <img class="grid_4 omega" src="daytempchill.png" alt="heatchill" />
          <div class="clr"></div>
        </div><div class="plots">  
          <img class="grid_4 alpha" src="dayrain.png"      alt="rain" />
          <img class="grid_4 omega" src="daywind.png"      alt="wind" />
          <div class="clr"></div>
        </div><div class="plots">   
          <img class="grid_4 alpha" src="daybarometer.png" alt="barometer"/>
          <img class="grid_4 omega"  src="daywinddir.png"   alt="Hi Wind" />
          <div class="clr"></div>
        </div><div class="plots">   
          <img class="grid_4 alpha" src="dayinside.png"    alt="Inside" />
          <img class="grid_4 omega"  src="daywindvec.png"   alt="Wind Vector" />
          <div class="clr"></div>
        </div><div class="plots">   

          #if $day.rxCheckPercent.has_data
            <img class="grid_4 alpha" src="dayrx.png" alt="day rx percent"/>
          #end if
          #if $day.radiation.has_data
            <img class="grid_4 omega" src="dayradiation.png" alt="Radiation" />
          #end if
        </div>
        <!-- End id "plots" -->
        
        <div class="clr"></div>

        <div id="almanac">
          <h3 class="header">Today's Almanac</h3>
          <div class="celestial_group">
            #if $almanac.hasExtras
            ## Extended almanac information is available. Do the full set of tables.
              <div class="celestial_body grid_4 alpha">
                <table>
                  <caption class="caption">Sun</caption>
                  <tr>
                    <td class="label">Start civil twilight:</td>
                    <td class="data">$almanac(horizon=-6).sun(use_center=1).rise</td>
                  </tr>
                  <tr>
                    <td class="label">Sunrise:</td>
                    <td class="data">$almanac.sun.rise</td>
                  </tr>
                  <tr>
                    <td class="label">Transit:</td>
                    <td class="data">$almanac.sun.transit</td>
                  </tr>
                  <tr>
                    <td class="label">Sunset:</td>
                    <td class="data">$almanac.sun.set</td>
                  </tr>
                  <tr>
                    <td class="label">End civil twilight:</td>
                    <td class="data">$almanac(horizon=-6).sun(use_center=1).set</td>
                  </tr>
                  <tr>
                    <td class="label">Azimuth:</td>
                    <td class="data">$("%.1f&deg;" % $almanac.sun.az)</td>
                  </tr>
                  <tr>
                    <td class="label">Altitude:</td>
                    <td class="data">$("%.1f&deg;" % $almanac.sun.alt)</td>
                  </tr>
                  <tr>
                    <td class="label">Right ascension:</td>
                    <td class="data">$("%.1f&deg;" % $almanac.sun.ra)</td>
                  </tr>
                  <tr>
                    <td class="label">Declination:</td>
                    <td class="data">$("%.1f&deg;" % $almanac.sun.dec)</td>
                  </tr>
                  #if $almanac.next_equinox.raw < $almanac.next_solstice.raw
                  ## The equinox is before the solstice. Display them in order.
                    <tr>
                      <td class="label">Equinox:</td>
                      <td class="data">$almanac.next_equinox</td>
                    </tr>
                    <tr>
                      <td class="label">Solstice:</td>
                      <td class="data">$almanac.next_solstice</td>
                    </tr>
                  #else
                  ## The solstice is before the equinox. Display them in order.
                    <tr>
                      <td class="label">Solstice:</td>
                      <td class="data">$almanac.next_solstice</td>
                    </tr>
                    <tr>
                      <td class="label">Equinox:</td>
                      <td class="data">$almanac.next_equinox</td>
                    </tr>
                  #end if
                </table>
              </div> <!-- end class "celestial_body" -->
              <div class="celestial_body grid_4 omega">
                <table>
                  <caption class="caption">Moon</caption>  
                  <tr>
                    <td class="label">Rise:</td>
                    <td class="data">$almanac.moon.rise</td>
                  </tr>
                  <tr>
                    <td class="label">Transit:</td>
                    <td class="data">$almanac.moon.transit</td>
                  </tr>
                  <tr>
                    <td class="label">Set:</td>
                    <td class="data">$almanac.moon.set</td>
                  </tr>
                  <tr>
                    <td class="label">Azimuth:</td>
                    <td class="data">$("%.1f&deg;" % $almanac.moon.az)</td>
                  </tr>
                  <tr>
                    <td class="label">Altitude:</td>
                    <td class="data">$("%.1f&deg;" % $almanac.moon.alt)</td>
                  </tr>
                  <tr>
                    <td class="label">Right ascension:</td>
                    <td class="data">$("%.1f&deg;" % $almanac.moon.ra)</td>
                  </tr>
                  <tr>
                    <td class="label">Declination:</td>
                    <td class="data">$("%.1f&deg;" % $almanac.moon.dec)</td>
                  </tr>
                  #if $almanac.next_full_moon.raw < $almanac.next_new_moon.raw
                    <tr>
                      <td class="label">Full moon:</td>
                      <td class="data">$almanac.next_full_moon</td>
                    </tr>
                    <tr>
                      <td class="label">New moon:</td>
                      <td class="data">$almanac.next_new_moon</td>
                    </tr>
                  #else
                    <tr>
                      <td class="label">New moon:</td>
                      <td class="data">$almanac.next_new_moon</td>
                    </tr>
                    <tr>
                      <td class="label">Full moon:</td>
                      <td class="data">$almanac.next_full_moon</td>
                    </tr>
                  #end if
                  <tr>
                    <td class="label">Phase:</td>
                    <td class="data">$almanac.moon_phase<br/>($almanac.moon_fullness% full)</td>
                  </tr>
                </table>
              </div> <!-- end class "celestial_body" -->
            #else
            ## No extended almanac information available. Fall back to a simple table.
              <table>
                <tr>
                  <td class="label">Sunrise:</td>
                  <td class="data">$almanac.sunrise</td>
                </tr>
                <tr>
                  <td class="label">Sunset:</td>
                  <td class="data">$almanac.sunset</td>
                </tr>
                <tr>
                  <td class="label">Moon Phase:</td>
                  <td class="data">$almanac.moon_phase<br/>($almanac.moon_fullness% full)</td>
                </tr>
              </table>
            #end if
          </div> <!-- end class "celestial_group" -->
        </div> <!-- end id "almanac" -->
      </div> <!-- End id "content" -->

      <div class="clr"></div>

      <div id="footer" class="grid_12">
        <h3>About this weather station</h3>
        <p>
          #if $station.hardware[0:7] == 'Vantage'
              This station uses a <a href="http://davisnet.com">
              Davis $station.hardware</a> weather station,
          #elif $station.hardware == 'VantageIP'
            with a <a href="http://davisnet.com/weather/products/weather_product.asp?pnum=06555">
            WeatherLinkIP connection</a>, 
          #elif $station.hardware == 'WMR100'
            This station uses an <a href="http://us.oregonscientific.com">
            Oregon Scientific WMR100N</a> weather station,
          #else
              This station uses a $station.hardware weather station,
          #end if
          controlled by <a href="http://www.weewx.com">'weewx'</a>, an
          experimental weather software system written in Python. Weewx was designed to be simple,
          fast, and easy to understand by leveraging modern software concepts.
        </p>
      </div> <!-- End id "about" -->
      
      
    <div class="clr"></div>
  </div><!-- End Page -->

    ## Include the Google Analytics code if the user has supplied an ID:
  #if $Extras.has_key('googleAnalyticsId')
    <script type="text/javascript">
        var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
        document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
    </script>
    <script type="text/javascript">
        try{
            var pageTracker = _gat._getTracker("$Extras.googleAnalyticsId");
            pageTracker._trackPageview();
        } catch(err) {}
    </script>
  #end if

</body>
</html>
